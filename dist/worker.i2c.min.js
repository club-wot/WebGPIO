"use strict";!function(){function e(e){var a=r(e.data);switch(a.method){case"i2c.open":navigator.mozI2c.open(a.portNumber);break;case"i2c.setDeviceAddress":var o=navigator.mozI2c.setDeviceAddress(a.portNumber,a.slaveAddress);postMessage(t({method:a.method+"."+a.portNumber,portNumber:a.portNumber,slaveDevice:o}));break;case"i2c.write":var s=navigator.mozI2c.write(a.portNumber,a.registerNumber,a.value,a.aIsOctet);postMessage(t({method:a.method+"."+a.portNumber+"."+a.registerNumber,portNumber:a.portNumber,value:s}));break;case"i2c.read":Promise.resolve(navigator.mozI2c.read(a.portNumber,a.readRegistar,a.aIsOctet)).then(function(e){postMessage(t({method:a.method+"."+a.portNumber+"."+a.readRegistar,portNumber:a.portNumber,value:e}))});break;default:throw"Unexpected case to worker method"}}onmessage=e;var r=function(e){return JSON.parse(String.fromCharCode.apply(null,new Uint16Array(e)))},t=function(e){for(var r=JSON.stringify(e),t=new ArrayBuffer(2*r.length),a=new Uint16Array(t),o=0,s=r.length;o<s;o++)a[o]=r.charCodeAt(o);return a}}();