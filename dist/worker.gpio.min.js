"use strict";!function(){function e(e){var r=o(e.data);switch(r.method){case"gpio.export":navigator.mozGpio["export"](r.portNumber),postMessage(a({method:r.method+"."+r.portNumber,portNumber:r.portNumber}));break;case"gpio.setDirection":navigator.mozGpio.setDirection(r.portNumber,r.direction),r.direction?t=t.filter(function(e){return r.portNumber!==e.portNumber}):t.push({portNumber:r.portNumber,value:void 0});break;case"gpio.setValue":navigator.mozGpio.setValue(r.portNumber,r.value);break;case"gpio.getValue":navigator.mozGpio.getValue(r.portNumber).then(function(e){postMessage(a({method:r.method+"."+r.portNumber,portNumber:r.portNumber,value:e}))});break;default:throw"Unexpected case to worker method"}}var r=function(){t.forEach(function(e){Promise.resolve(navigator.mozGpio.getValue(e.portNumber)).then(function(r){parseInt(e.value)!==parseInt(r)&&(e.value=r,postMessage(a({method:"gpio.onchange."+e.portNumber,portNumber:e.portNumber,value:r})))})})},t=[];setInterval(r,30);onmessage=e;var o=function(e){return JSON.parse(String.fromCharCode.apply(null,new Uint16Array(e)))},a=function(e){for(var r=JSON.stringify(e),t=new ArrayBuffer(2*r.length),o=new Uint16Array(t),a=0,n=r.length;a<n;a++)o[a]=r.charCodeAt(a);return o}}();